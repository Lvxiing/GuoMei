<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="js/jquery-1.12.4.js"></script>

    <!--<script type="text/javascript">-->
        <!--$(function(){-->
                <!--var phoneNum = $("#phoneNum").text();-->
                <!--$("#addCode").click(function () {-->
                    <!--$.ajax()-->
                <!--})-->
        <!--})-->
    <!--</script>-->
    <script type="text/javascript">
        $(function(){
            $("#second").click(function () {
                sendyzm($("#second"));
            })
        })
        function sendyzm(){
            var phone = $("#userPhone").val();
            var result = isPhoneNum();
            if(result){
                $.getJSON("/ajaxNum","phoneNum="+phone,function (json) {
                    var verCode = json.numeric;
                })
                setTime(obj);
            }
        }
        var countdown = 60;
        function setTime(obj) {
            if (countdown == 0) {
                obj.prop('disabled', false);
                obj.text("点击获取验证码");
                countdown = 60;//60秒过后button上的文字初始化,计时器初始化;
                return;
            } else {
                obj.prop('disabled', true);
                obj.text("("+countdown+"s)后重新发送") ;
                countdown--;
            }
            setTimeout(function() { setTime(obj) },1000) //每1000毫秒执行一次
        }

        function isPhoneNum(){
            var phonenum = $("#userPhone").val();
            var reg = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
            if(!reg.test(phonenum)){
                alert('请输入有效的手机号码！');
                return false;
            }else{
                return true;
            }
        }
    </script>

</head>
<body>
<form action="/verfiy" method="post">
    手机号:<input type="text" name="phoneNum" id = "userPhone"><br>
    验证码:<input type="text" name="code"><input type="button" id="second" value="获取验证码">
    <input type="submit" value="登录">
</form>
</body>
</html>